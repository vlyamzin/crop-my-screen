var CropMyScreen;(()=>{var i={740:(t,e,i)=>{"use strict";i.d(e,{Z:()=>r});var n=i(81),e=i.n(n),n=i(645),e=i.n(n)()(e());e.push([t.id,"#crms-container {\n\tposition: absolute;\n\tleft: 0;\n\twidth: 640px;\n\theight: 570px;\n\tz-index: 10;\n\tbackground: #fff;\n\tborder-radius: 5px;\n\toverflow: hidden;\n\tbox-shadow: 1px 1px 7px 0 #343434;\n\twill-change: transform;\n}\n\n#crms-canvas-wrap {\n\tdisplay: flex;\n\tjustify-content: center;\n\tbackground: #d3d3d3;\n}\n\n#crms-preview {\n\twidth: 100%;\n\theight: 100%;\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: space-between;\n\tbackground: #d3d3d3;\n}\n\n#crms-preview-header {\n\theight: 30px;\n\tcursor: grab;\n\tdisplay: flex;\n\tjustify-content: flex-end;\n\talign-items: center;\n\tbackground: #fff;\n}\n\n#crms-preview-footer {\n\theight: 50px;\n\tpadding: 5px 10px;\n\tdisplay: flex;\n\tjustify-content: flex-end;\n\talign-items: center;\n\tbackground: #fff;\n}\n\n#crms-input {\n\tdisplay: none;\n\tvisibility: hidden;\n}\n\n#crms-output {\n\tdisplay: block;\n\tbackground-color: #6a6a6a;\n}\n\n/* #sharingScreen.visible {\n  display: block;\n} */\n\n/* screen share area selector */\n#backdrop-wrapper {\n\tposition: fixed;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n\tz-index: 1;\n}\n\n#drag-markers-container {\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n}\n\n.draggable {\n\tposition: absolute;\n\twidth: 16px;\n\theight: 16px;\n\tcursor: move;\n\tz-index: 2;\n}\n\n.btn {\n\tdisplay: inline-block;\n\tfont-weight: 400;\n\ttext-align: center;\n\twhite-space: nowrap;\n\tvertical-align: middle;\n\t-webkit-user-select: none;\n\t-moz-user-select: none;\n\t-ms-user-select: none;\n\tuser-select: none;\n\tborder: 1px solid #f8f9fa;\n\tmargin: 0 .75rem;\n\tpadding: .375rem .75rem;\n\tfont-size: 1rem;\n\tline-height: 1.5;\n\tborder-radius: .25rem;\n\ttransition: color .15s ease-in-out, background-color .15s ease-in-out, border-color .15s ease-in-out, box-shadow .15s ease-in-out;\n\tcolor: #212529;\n\tbackground-color: #f8f9fa;\n\tcursor: pointer;\n}\n\n.btn:hover {\n\tbackground-color: #e2e6ea;\n\tborder-color: #dae0e5;\n}\n\n.btn-primary {\n\tcolor: #fff;\n\tbackground-color: #007bff;\n\tborder-color: #007bff;\n}\n\n.btn-primary:hover {\n\tbackground-color: #0069d9;\n\tborder-color: #0062cc;\n}\n\n.icon-btn {\n\tbackground: none;\n\tborder: none;\n\toutline: none;\n\tpadding: 2px 7px;\n\tcursor: pointer;\n}\n\n.icon-btn.s20 {\n\tpadding: 4px 9px;\n}\n\n.icon-btn:hover {\n\tbackground-color: #e2e6ea;\n\tborder-color: #dae0e5;\n}\n\n.icon-btn.s24 > svg {\n\twidth: 24px;\n\theight: 24px;\n}\n\n.icon-btn.s20 > svg {\n\twidth: 20px;\n\theight: 20px;\n}\n\n/* end screen share area selector */\n#buttons {\n\tposition: absolute;\n\tbottom: 0;\n\tpadding: 1rem;\n\tbackground: #6a6a6a;\n\tz-index: 999;\n}\n\n.crms-hidden {\n\tdisplay: none !important;\n\tvisibility: hidden;\n}\n\n.w100 {\n\twidth: 100%;\n}\n\n.h100 {\n\theight: 100%;\n}\n",""]);const r=e},645:t=>{"use strict";t.exports=function(n){var d=[];return d.toString=function(){return this.map(function(t){var e="",i=void 0!==t[5];return t[4]&&(e+="@supports (".concat(t[4],") {")),t[2]&&(e+="@media ".concat(t[2]," {")),i&&(e+="@layer".concat(0<t[5].length?" ".concat(t[5]):""," {")),e+=n(t),i&&(e+="}"),t[2]&&(e+="}"),t[4]&&(e+="}"),e}).join("")},d.i=function(t,e,i,n,r){"string"==typeof t&&(t=[[null,t,void 0]]);var s={};if(i)for(var o=0;o<this.length;o++){var a=this[o][0];null!=a&&(s[a]=!0)}for(var c=0;c<t.length;c++){var h=[].concat(t[c]);i&&s[h[0]]||(void 0!==r&&(void 0===h[5]||(h[1]="@layer".concat(0<h[5].length?" ".concat(h[5]):""," {").concat(h[1],"}")),h[5]=r),e&&(h[2]&&(h[1]="@media ".concat(h[2]," {").concat(h[1],"}")),h[2]=e),n&&(h[4]?(h[1]="@supports (".concat(h[4],") {").concat(h[1],"}"),h[4]=n):h[4]="".concat(n)),d.push(h))}},d}},81:t=>{"use strict";t.exports=function(t){return t[1]}},379:t=>{"use strict";var h=[];function d(t){for(var e=-1,i=0;i<h.length;i++)if(h[i].identifier===t){e=i;break}return e}function a(t,e){for(var i={},n=[],r=0;r<t.length;r++){var s=t[r],o=e.base?s[0]+e.base:s[0],a=i[o]||0,c="".concat(o," ").concat(a);i[o]=a+1;var a=d(c),s={css:s[1],media:s[2],sourceMap:s[3],supports:s[4],layer:s[5]};-1!==a?(h[a].references++,h[a].updater(s)):(s=function(e,t){var i=t.domAPI(t);return i.update(e),function(t){t?t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer||i.update(e=t):i.remove()}}(s,e),e.byIndex=r,h.splice(r,0,{identifier:c,updater:s,references:1})),n.push(c)}return n}t.exports=function(t,s){var o=a(t=t||[],s=s||{});return function(t){t=t||[];for(var e=0;e<o.length;e++){var i=d(o[e]);h[i].references--}for(var t=a(t,s),n=0;n<o.length;n++){var r=d(o[n]);0===h[r].references&&(h[r].updater(),h.splice(r,1))}o=t}}},569:t=>{"use strict";var i={};t.exports=function(t,e){if(!(t=function(t){if(void 0===i[t]){var e=document.querySelector(t);if(window.HTMLIFrameElement&&e instanceof window.HTMLIFrameElement)try{e=e.contentDocument.head}catch(t){e=null}i[t]=e}return i[t]}(t)))throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");t.appendChild(e)}},216:t=>{"use strict";t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},565:(t,e,i)=>{"use strict";t.exports=function(t){var e=i.nc;e&&t.setAttribute("nonce",e)}},795:t=>{"use strict";t.exports=function(e){var i=e.insertStyleElement(e);return{update:function(t){!function(t,e,i){var n="";i.supports&&(n+="@supports (".concat(i.supports,") {")),i.media&&(n+="@media ".concat(i.media," {"));var r=void 0!==i.layer;r&&(n+="@layer".concat(0<i.layer.length?" ".concat(i.layer):""," {")),n+=i.css,r&&(n+="}"),i.media&&(n+="}"),i.supports&&(n+="}"),(i=i.sourceMap)&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleTagTransform(n,t,e.options)}(i,e,t)},remove:function(){var t;null!==(t=i).parentNode&&t.parentNode.removeChild(t)}}}},589:t=>{"use strict";t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},271:t=>{t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M7.724 65.49C13.36 55.11 21.79 46.47 32 40.56C39.63 36.15 48.25 33.26 57.46 32.33C59.61 32.11 61.79 32 64 32H448C483.3 32 512 60.65 512 96V416C512 451.3 483.3 480 448 480H64C28.65 480 0 451.3 0 416V96C0 93.79 .112 91.61 .3306 89.46C1.204 80.85 3.784 72.75 7.724 65.49V65.49zM48 416C48 424.8 55.16 432 64 432H448C456.8 432 464 424.8 464 416V224H48V416z"></path></svg>'},437:t=>{t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M0 456C0 442.7 10.75 432 24 432H488C501.3 432 512 442.7 512 456C512 469.3 501.3 480 488 480H24C10.75 480 0 469.3 0 456z"></path></svg>'},56:t=>{t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"></path></svg>'}},n={};function x(t){var e=n[t];if(void 0!==e)return e.exports;e=n[t]={id:t,exports:{}};return i[t](e,e.exports,x),e.exports}x.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return x.d(e,{a:e}),e},x.d=(t,e)=>{for(var i in e)x.o(e,i)&&!x.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},x.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var R={};(()=>{"use strict";function s(){return window.outerHeight-window.innerHeight}function n(t,e){return e<t?t/e:e/t}function c(t){return window.CropMyScreen.prefix+"-"+t}function h(t,e){t&&"function"==typeof t&&t.call(this,e)}function t(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}x.d(R,{default:()=>S});class e{constructor(){t(this,"resizing",!1),t(this,"drawing",!1),t(this,"dragPoint",void 0),t(this,"backdropCanvas",void 0),t(this,"backdropCtx",void 0),t(this,"START_X",void 0),t(this,"START_Y",void 0),t(this,"END_X",void 0),t(this,"END_Y",void 0),t(this,"CROP_W",void 0),t(this,"CROP_H",void 0),t(this,"BACKDROP_COLOR",void 0)}init(t){t?(this.START_X=t.x||0,this.START_Y=t.y||0,this.CROP_W=t.dx||0,this.CROP_H=t.dy||0,this.END_X=this.START_X+this.CROP_W,this.END_Y=this.START_Y+this.CROP_H):(this.START_X=0,this.START_Y=0),this._drawBackDrop(!0),this.areaSelectionStart=t=>{t.preventDefault(),t.stopPropagation(),t.target.classList.contains(c("control"))||this.resizing||(document.querySelectorAll(".draggable").forEach(t=>t.remove()),this.drawing=!0,this.START_X=t.clientX,this.START_Y=t.clientY)},this.areaSelectionEnd=t=>{t.preventDefault(),t.stopPropagation(),t.target.classList.contains(c("control"))||(this.resizing&&(this.resizing=!1,this._swapCoordinates(),this._drawResizeMarkers(this.backdropCtx)),this.drawing&&(this.drawing=!1,t.clientX===this.START_X&&t.clientY===this.START_Y||(this._swapCoordinates(),this._drawResizeMarkers(this.backdropCtx))))},this.areaSelectionMouseMove=t=>{if(t.preventDefault(),t.stopPropagation(),this.resizing)return this._areaResize(t),void this._drawArea();this.drawing&&(this.CROP_W=t.clientX-this.START_X,this.CROP_H=t.clientY-this.START_Y,this.END_X=t.clientX,this.END_Y=t.clientY,this._drawArea())},document.addEventListener("mousedown",this.areaSelectionStart),document.addEventListener("mouseup",this.areaSelectionEnd),document.addEventListener("mousemove",this.areaSelectionMouseMove)}getCoords(){return{x:this.START_X,y:this.START_Y,dx:this.CROP_W,dy:this.CROP_H}}remove(){this.areaSelectionStart&&(document.removeEventListener("mousedown",this.areaSelectionStart,!1),this.areaSelectionStart=null),this.areaSelectionEnd&&(document.removeEventListener("mouseup",this.areaSelectionEnd,!1),this.areaSelectionEnd=null),this.areaSelectionMouseMove&&(document.removeEventListener("mousemove",this.areaSelectionMouseMove,!1),this.areaSelectionMouseMove=null),document.getElementById("backdrop-wrapper").remove()}_drawBackDrop(t){if(!t){t=document.getElementById("backdrop-wrapper");return t&&document.body.removeChild(t),void(this.backdropCtx=null)}const e=document.createElement("div");e.setAttribute("id","backdrop-wrapper"),document.body.appendChild(e),this.backdropCanvas=document.createElement("canvas"),this.backdropCanvas.width=e.clientWidth,this.backdropCanvas.height=e.clientHeight,this.dragMarkersContainer=document.createElement("div"),this.dragMarkersContainer.setAttribute("id","drag-markers-container"),e.appendChild(this.backdropCanvas),e.appendChild(this.dragMarkersContainer),this.backdropCtx=this.backdropCanvas.getContext("2d"),this.backdropCtx.fillStyle=this.BACKDROP_COLOR,this.backdropCtx.fillRect(0,0,this.backdropCanvas.width,this.backdropCanvas.height),this._drawArea(),this._drawResizeMarkers(this.backdropCtx)}_drawArea(){this.backdropCtx.clearRect(0,0,this.backdropCanvas.width,this.backdropCanvas.height),this.backdropCtx.fillStyle=this.BACKDROP_COLOR,this.backdropCtx.fillRect(0,0,this.backdropCanvas.width,this.backdropCanvas.height),this.backdropCtx.globalCompositeOperation="destination-out",this.backdropCtx.fillStyle="red",this.backdropCtx.fillRect(this.START_X,this.START_Y,this.CROP_W,this.CROP_H),this.backdropCtx.globalCompositeOperation="source-over",this.backdropCtx.strokeStyle="rgb(163, 9, 9)",this.backdropCtx.setLineDash([6]),this.backdropCtx.lineWidth="3",this.backdropCtx.strokeRect(this.START_X,this.START_Y,this.CROP_W,this.CROP_H)}_swapCoordinates(){var t;this.END_X<this.START_X&&(t=this.START_X,this.START_X=this.END_X,this.END_X=t,this.CROP_W=this.END_X-this.START_X),this.END_Y<this.START_Y&&(t=this.START_Y,this.START_Y=this.END_Y,this.END_Y=t,this.CROP_H=this.END_Y-this.START_Y)}_drawResizeMarkers(t){t.fillStyle="rgb(180, 9, 9)";var e,i,n={topLeft:{type:0,values:[this.START_X-4,this.START_Y-4]},topCenter:{type:1,values:[this.START_X+(this.CROP_W/2-4),this.START_Y-4]},topRight:{type:0,values:[this.END_X-4,this.START_Y-4]},rightCenter:{type:1,values:[this.END_X-4,this.START_Y+(this.CROP_H/2-4)]},bottomRight:{type:0,values:[this.END_X-4,this.END_Y-4]},bottomCenter:{type:1,values:[this.START_X+(this.CROP_W/2-4),this.END_Y-4]},bottomLeft:{type:0,values:[this.START_X-4,this.END_Y-4]},leftCenter:{type:1,values:[this.START_X-4,this.START_Y+(this.CROP_H/2-4)]}};for([e,i]of Object.entries(n)){t.fillRect(i.values[0],i.values[1],8,8);const r=document.createElement("div");r.classList.add("draggable"),r.setAttribute("side",e),0<i.type?r.classList.add("side"):r.classList.add("corner"),r.style.top=i.values[1]-4+"px",r.style.left=i.values[0]-4+"px",this.dragMarkersContainer.appendChild(r)}document.querySelectorAll(".draggable").forEach(t=>{t.addEventListener("mousedown",this._areaResizeStart.bind(this))})}_areaResizeStart(t){t.preventDefault(),t.stopPropagation(),this.resizing=!0,this.dragPoint=t.target,document.querySelectorAll(".draggable").forEach(t=>{t.removeEventListener("mousedown",this._areaResizeStart),t.remove()})}_areaResize(t){switch(this.dragPoint.getAttribute("side")){case"topLeft":var e=t.clientX-this.START_X,i=t.clientY-this.START_Y;this.CROP_W=this.CROP_W-e,this.CROP_H=this.CROP_H-i,this.START_X=t.clientX,this.START_Y=t.clientY;break;case"topCenter":var n=t.clientY-this.START_Y;this.CROP_H=this.CROP_H-n,this.START_Y=t.clientY;break;case"topRight":var n=t.clientX-this.END_X,r=t.clientY-this.START_Y;this.CROP_W=this.CROP_W+n,this.CROP_H=this.CROP_H-r,this.END_X=t.clientX,this.START_Y=t.clientY;break;case"rightCenter":var s=t.clientX-this.END_X;this.CROP_W=this.CROP_W+s,this.END_X=t.clientX;break;case"bottomRight":r=t.clientX-this.END_X,s=t.clientY-this.END_Y;this.CROP_W=this.CROP_W+r,this.CROP_H=this.CROP_H+s,this.END_X=t.clientX,this.END_Y=t.clientY;break;case"bottomCenter":var o=t.clientY-this.END_Y;this.CROP_H=this.CROP_H+o,this.END_Y=t.clientY;break;case"bottomLeft":var o=t.clientX-this.START_X,a=t.clientY-this.END_Y;this.CROP_W=this.CROP_W-o,this.CROP_H=this.CROP_H+a,this.START_X=t.clientX,this.END_Y=t.clientY;break;case"leftCenter":a=t.clientX-this.START_X;this.CROP_W=this.CROP_W-a,this.START_X=t.clientX}}}function i(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class r{constructor(t){if(i(this,"_isMoving",void 0),i(this,"_startCoords",void 0),i(this,"_translateOffset",void 0),i(this,"_deltaX",void 0),i(this,"_deltaY",void 0),i(this,"_dragZone",void 0),i(this,"_container",void 0),this._container=t,this._dragZone=t.querySelector(".window-move"),!this._container||!this._dragZone)throw console.error("WindowManager: Container is not available"),new Error("WindowManager: Container is not available")}init(){this._isMoving=!1,this._startCoords={x:0,y:0},this._translateOffset={x:0,y:0},this._deltaX=this._deltaY=0,this._limitCanvasWrap(),this._dragZone.addEventListener("mousedown",this._mouseDown.bind(this)),document.addEventListener("mousemove",this._moveMove.bind(this)),document.addEventListener("mouseup",this._mouseUp.bind(this))}fitCanvas(t){let e;try{e=this._getHeaderFooterOffset()}catch(t){e=0}var i=n(this._container.clientWidth,this._container.clientHeight-e);n(t.width,t.height)<i?(t.classList.add("h100"),t.classList.remove("w100")):t.classList.add("w100","h100")}minimize(t){t?(t=(t=this._container.querySelector("#"+c("preview-header")))&&t.clientHeight,this._container.style.height=t?t+"px":this._container.clientHeight+"px"):this._container.style.removeProperty("height")}destroy(){this._dragZone.removeEventListener("mousedown",this._mouseDown),document.removeEventListener("mousemove",this._moveMove),document.removeEventListener("mouseup",this._mouseUp),this._dragZone.remove(),this._container=null,this._dragZone=null}_mouseDown(t){this._isMoving=!0,this._dragZone.style.cursor="grabbing",this._startCoords.x=t.clientX,this._startCoords.y=t.clientY}_moveMove(t){this._isMoving&&(this._deltaX=t.clientX-this._startCoords.x,this._deltaY=t.clientY-this._startCoords.y,this._container.style.transform=`translate(${this._deltaX+this._translateOffset.x}px, ${this._deltaY+this._translateOffset.y}px)`)}_mouseUp(){this._isMoving&&(this._isMoving=!1,this._dragZone.style.cursor="grab",this._translateOffset.x+=this._deltaX,this._translateOffset.y+=this._deltaY)}_limitCanvasWrap(){const t=this._container.querySelector("#"+c("canvas-wrap"));let e,i;try{i=this._getHeaderFooterOffset()}catch(t){e=t,i=0}if(t||(e="WindowManager: Canvas wrap element not found"),e)throw console.error(e),new Error(e);t.style.maxWidth=this._container.clientWidth+"px",t.style.maxHeight=this._container.clientHeight-i+"px"}_getHeaderFooterOffset(){try{return this._container.querySelector("#"+c("preview-header")).clientHeight+this._container.querySelector("#"+c("preview-footer")).clientHeight}catch(t){throw new Error("WindowManager: Can't obtaint header & footer height")}}}var o=x(56),a=x.n(o),d=x(437),l=x.n(d),p=x(271),u=x.n(p);function v(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class _{constructor(){v(this,"constraints",void 0),v(this,"areaSelector",void 0),v(this,"windowManager",void 0),v(this,"containerEl",void 0),v(this,"videoEl",void 0),v(this,"canvas",void 0),v(this,"displaySurfaceType",void 0),v(this,"buttonGroup",{1:[],2:[]}),this.areaSelector=new e}render(t){var{customClass:e,backdropColor:i}=t,t="container";document.getElementById(c(t))||(this.containerEl=this._createElement("div",c(t)),e&&this.containerEl.classList.add(e),this.videoEl=this._createElement("video",c("input")),this.canvas=this._createElement("canvas",c("output")),e=this._initPreviewer(this.canvas),this.videoEl.muted=!0,this.containerEl.appendChild(this.videoEl),this.containerEl.appendChild(e),this._togglePreviewer(!1),document.body.appendChild(this.containerEl),this.windowManager=new r(this.containerEl),this.areaSelector.BACKDROP_COLOR=i)}startStream(t,e){const{dx:i,dy:n}=e,r=this.canvas.getContext("2d");var s=t.getVideoTracks()[0].getSettings();this.displaySurfaceType=s&&s.displaySurface,this.constraints=this._correctCoordinates(e,!0),this.videoEl.ontimeupdate=()=>{this._cropFrame(r,this.videoEl)},this.videoEl.onpause=()=>r.clearRect(0,0,i,n),this.videoEl.onended=()=>r.clearRect(0,0,i,n),this.videoEl.srcObject=t,this.videoEl.play(),this.canvas.width=i,this.canvas.height=n,this._togglePreviewer(!0),this.windowManager.init(),this.windowManager.fitCanvas(this.canvas)}stopStream(){const t=this.videoEl.srcObject.getTracks();(t||[]).forEach(t=>t.stop()),this.videoEl.srcObject=null,this._togglePreviewer(!1)}destroy(){this.areaSelector.destroy(),this.windowManager.destroy(),this.containerEl.remove()}onStreamStarted(t){}onStreamStopped(){}_cropFrame(t,e){var i,n,r,s;t&&({x:i,y:n,dx:r,dy:s}=this.constraints,t.drawImage(e,i,n,r,s,0,0,r,s))}_createElement(t,e){const i=document.createElement(t);return i.setAttribute("id",e),i}_initPreviewer(t){const e=this._createElement("div",c("preview")),i=this._createElement("div",c("canvas-wrap")),n=this._createElement("div",c("preview-header")),r=this._createElement("div",c("preview-footer"));return n.classList.add("window-move"),this._headerButtonsConfig.forEach(t=>{t=this._renderHeaderButton(t);n.append(t)}),this._footerButtonsConfig.forEach(t=>{t=this._renderFooterButton(t);r.append(t)}),i.append(t),e.append(n,i,r),e}_renderHeaderButton(t){let{id:e,icon:i,callback:n,iconSize:r}=t;const s=document.createElement("button");return s.setAttribute("id",e),s.setAttribute("type","button"),s.classList.add("crms-control","icon-btn"),r&&s.classList.add(r),s.innerHTML=i,s.onmousedown=t=>{t.stopPropagation()},s.onclick=t=>{h(n,t.currentTarget)},s}_renderFooterButton(t){let{id:e,text:i,primary:n,visible:r,group:s,callback:o}=t;const a=document.createElement("button");return a.setAttribute("id",e),a.setAttribute("type","button"),a.classList.add("btn","crms-control"),s&&s.push(a),n&&a.classList.add("btn-primary"),a.innerText=i,!(a.onclick=()=>{h(o)})===r&&a.classList.add(c("hidden")),a}_togglePreviewer(t){t?this.containerEl.classList.remove(c("hidden")):this.containerEl.classList.add(c("hidden"))}_toggleButtons(t){if(1===t)return this.buttonGroup[1].forEach(t=>t.classList.remove(c("hidden"))),void this.buttonGroup[2].forEach(t=>t.classList.add(c("hidden")));2===t&&(this.buttonGroup[2].forEach(t=>t.classList.remove(c("hidden"))),this.buttonGroup[1].forEach(t=>t.classList.add(c("hidden"))))}_correctCoordinates(e,i){var n=function(){let t;const e=navigator.userAgent;return t=-1<e.indexOf("Firefox")?"Firefox":-1<e.indexOf("SamsungBrowser")?"Samsung Internet":-1<e.indexOf("Opera")||-1<e.indexOf("OPR")?"Opera":-1<e.indexOf("Trident")?"IE":-1<e.indexOf("Edge")?"EdgeLegacy)":-1<e.indexOf("Edg")?"Edge":-1<e.indexOf("Chrome")?"Chrome":-1<e.indexOf("Safari")?"Safari":"unknown",t}();if(!this.displaySurfaceType||"monitor"===this.displaySurfaceType){var{top:t,left:r}={top:window.screenY+s(),left:window.screenX<0?0:window.screenX};return{...e,x:i?e.x+r:e.x-r,y:i?e.y+t:e.y-t}}if("window"!==this.displaySurfaceType&&"browser"!==this.displaySurfaceType)return e;{console.warn("CropMyScreen does support cropping of the entire screen.\nIt does not crop browser window or tab well enough.\nPlease, use 'Entire screen' option instead.");let t=0;return"Chrome"===n&&(t=7*window.devicePixelRatio),{...e,y:i?e.y+s()+t:e.y-s()-t}}}get _headerButtonsConfig(){return[{id:c("btn-minimize"),icon:l(),iconSize:"s20",callback:(()=>{let e=!1;return t=>{e?(t.innerHTML=l(),this.windowManager.minimize(!1)):(t.innerHTML=u(),this.windowManager.minimize(!0)),e=!e}})()},{id:c("btn-close"),icon:a(),iconSize:"s24",callback:()=>{this.stopStream(),this.onStreamStopped()}}]}get _footerButtonsConfig(){var t={id:c("btn-select-area"),text:"Select Area",primary:!1,visible:!0,group:this.buttonGroup[1],callback:()=>{var t=this._correctCoordinates(this.constraints,!1);this.areaSelector.init(t),this._toggleButtons(2)}};return[{id:c("btn-cancel-selection"),text:"Cancel",primary:!1,visible:!1,group:this.buttonGroup[2],callback:()=>{this.areaSelector.remove(),this._toggleButtons(1)}},{id:c("btn-apply-selection"),text:"Apply",primary:!0,visible:!1,group:this.buttonGroup[2],callback:()=>{this.constraints=this._correctCoordinates(this.areaSelector.getCoords(),!0),this.areaSelector.remove(),this.canvas.width=this.constraints.dx,this.canvas.height=this.constraints.dy,this.windowManager.fitCanvas(this.canvas),this._toggleButtons(1)}},t,{id:c("btn-start-sharing"),text:"Start presentation",primary:!0,group:this.buttonGroup[1],callback:()=>{var t=this.canvas.captureStream();this.onStreamStarted(t),this._togglePreviewer(!1)}}]}}var g=x(379),m=x.n(g),f=x(795),b=x.n(f),C=x(569),o=x.n(C),d=x(565),p=x.n(d),g=x(216),f=x.n(g),C=x(589),d=x.n(C),g=x(740),C={};C.styleTagTransform=d(),C.setAttributes=p(),C.insert=o().bind(null,"head"),C.domAPI=b(),C.insertStyleElement=f();m()(g.Z,C),g.Z&&g.Z.locals&&g.Z.locals;function w(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class y{constructor(t){w(this,"settings",void 0),w(this,"cropper",void 0),this.settings={...this._defaultOptions(),...t||{}},this.cropper=new _(y.prefix),this.cropper.render({customClass:this.settings.previewerClass,backdropColor:this.settings.backdropColor})}start(t){return this.cropper.startStream(t,{x:this.settings.cropX,y:this.settings.cropY,dx:this.settings.cropW,dy:this.settings.cropH}),new Promise((e,t)=>{this.cropper.onStreamStarted=t=>{e(t)},this.cropper.onStreamStopped=()=>{t()}})}stop(){this.cropper.stopStream()}destroy(){this.cropper.destroy()}_defaultOptions(){return{backdropColor:"#00000073",cropX:0,cropY:0,cropW:640,cropH:480,previewerClass:""}}}w(y,"prefix","crms");const S=y})(),CropMyScreen=R.default})();