var CropMyScreen;(()=>{var t={740:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var i=n(537),r=n.n(i),o=n(645),s=n.n(o)()(r());s.push([t.id,"#crms-container {\n\tposition: absolute;\n\tleft: 0;\n\tbottom: 0;\n\twidth: 640px;\n\theight: 570px;\n\tz-index: 10;\n\tbackground: #fff;\n\tborder-radius: 5px;\n\toverflow: hidden;\n\tbox-shadow: 1px 1px 7px 0 #343434;\n\twill-change: transform;\n}\n\n#crms-canvas-wrap {\n\tdisplay: flex;\n\tjustify-content: center;\n\tbackground: #d3d3d3;\n}\n\n#crms-preview {\n\twidth: 100%;\n\theight: 100%;\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: space-between;\n\tbackground: #d3d3d3;\n}\n\n#crms-preview-header {\n\theight: 30px;\n\tcursor: grab;\n\tdisplay: flex;\n\tjustify-content: flex-end;\n\talign-items: center;\n\tbackground: #fff;\n}\n\n#crms-preview-footer {\n\theight: 50px;\n\tpadding: 5px 10px;\n\tdisplay: flex;\n\tjustify-content: flex-end;\n\talign-items: center;\n\tbackground: #fff;\n}\n\n#crms-input {\n\tdisplay: none;\n\tvisibility: hidden;\n}\n\n#crms-output {\n\tdisplay: block;\n\tbackground-color: #6a6a6a;\n}\n\n/* #sharingScreen.visible {\n  display: block;\n} */\n\n/* screen share area selector */\n#backdrop-wrapper {\n\tposition: fixed;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n\tz-index: 1;\n}\n\n#drag-markers-container {\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n}\n\n.draggable {\n\tposition: absolute;\n\twidth: 16px;\n\theight: 16px;\n\tcursor: move;\n\tz-index: 2;\n}\n\n.btn {\n\tdisplay: inline-block;\n\tfont-weight: 400;\n\ttext-align: center;\n\twhite-space: nowrap;\n\tvertical-align: middle;\n\t-webkit-user-select: none;\n\t-moz-user-select: none;\n\t-ms-user-select: none;\n\tuser-select: none;\n\tborder: 1px solid #f8f9fa;\n\tmargin: 0 .75rem;\n\tpadding: .375rem .75rem;\n\tfont-size: 1rem;\n\tline-height: 1.5;\n\tborder-radius: .25rem;\n\ttransition: color .15s ease-in-out, background-color .15s ease-in-out, border-color .15s ease-in-out, box-shadow .15s ease-in-out;\n\tcolor: #212529;\n\tbackground-color: #f8f9fa;\n\tcursor: pointer;\n}\n\n.btn:hover {\n\tbackground-color: #e2e6ea;\n\tborder-color: #dae0e5;\n}\n\n.btn-primary {\n\tcolor: #fff;\n\tbackground-color: #007bff;\n\tborder-color: #007bff;\n}\n\n.btn-primary:hover {\n\tbackground-color: #0069d9;\n\tborder-color: #0062cc;\n}\n\n.icon-btn {\n\tbackground: none;\n\tborder: none;\n\toutline: none;\n\tpadding: 2px 7px;\n\tcursor: pointer;\n}\n\n.icon-btn.s20 {\n\tpadding: 4px 9px;\n}\n\n.icon-btn:hover {\n\tbackground-color: #e2e6ea;\n\tborder-color: #dae0e5;\n}\n\n.icon-btn.s24 > svg {\n\twidth: 24px;\n\theight: 24px;\n}\n\n.icon-btn.s20 > svg {\n\twidth: 20px;\n\theight: 20px;\n}\n\n/* end screen share area selector */\n#buttons {\n\tposition: absolute;\n\tbottom: 0;\n\tpadding: 1rem;\n\tbackground: #6a6a6a;\n\tz-index: 999;\n}\n\n.crms-hidden {\n\tdisplay: none !important;\n\tvisibility: hidden;\n}\n\n.w100 {\n\twidth: 100%;\n}\n\n.h100 {\n\theight: 100%;\n}\n","",{version:3,sources:["webpack://./src/css/styles.css"],names:[],mappings:"AAAA;CACC,kBAAkB;CAClB,OAAO;CACP,SAAS;CACT,YAAY;CACZ,aAAa;CACb,WAAW;CACX,gBAAgB;CAChB,kBAAkB;CAClB,gBAAgB;CAChB,iCAAiC;CACjC,sBAAsB;AACvB;;AAEA;CACC,aAAa;CACb,uBAAuB;CACvB,mBAAmB;AACpB;;AAEA;CACC,WAAW;CACX,YAAY;CACZ,aAAa;CACb,sBAAsB;CACtB,8BAA8B;CAC9B,mBAAmB;AACpB;;AAEA;CACC,YAAY;CACZ,YAAY;CACZ,aAAa;CACb,yBAAyB;CACzB,mBAAmB;CACnB,gBAAgB;AACjB;;AAEA;CACC,YAAY;CACZ,iBAAiB;CACjB,aAAa;CACb,yBAAyB;CACzB,mBAAmB;CACnB,gBAAgB;AACjB;;AAEA;CACC,aAAa;CACb,kBAAkB;AACnB;;AAEA;CACC,cAAc;CACd,yBAAyB;AAC1B;;AAEA;;GAEG;;AAEH,+BAA+B;AAC/B;CACC,eAAe;CACf,MAAM;CACN,OAAO;CACP,WAAW;CACX,YAAY;CACZ,UAAU;AACX;;AAEA;CACC,kBAAkB;CAClB,MAAM;CACN,OAAO;AACR;;AAEA;CACC,kBAAkB;CAClB,WAAW;CACX,YAAY;CACZ,YAAY;CACZ,UAAU;AACX;;AAEA;CACC,qBAAqB;CACrB,gBAAgB;CAChB,kBAAkB;CAClB,mBAAmB;CACnB,sBAAsB;CACtB,yBAAyB;CACzB,sBAAsB;CACtB,qBAAqB;CACrB,iBAAiB;CACjB,yBAAyB;CACzB,gBAAgB;CAChB,uBAAuB;CACvB,eAAe;CACf,gBAAgB;CAChB,qBAAqB;CACrB,iIAAiI;CACjI,cAAc;CACd,yBAAyB;CACzB,eAAe;AAChB;;AAEA;CACC,yBAAyB;CACzB,qBAAqB;AACtB;;AAEA;CACC,WAAW;CACX,yBAAyB;CACzB,qBAAqB;AACtB;;AAEA;CACC,yBAAyB;CACzB,qBAAqB;AACtB;;AAEA;CACC,gBAAgB;CAChB,YAAY;CACZ,aAAa;CACb,gBAAgB;CAChB,eAAe;AAChB;;AAEA;CACC,gBAAgB;AACjB;;AAEA;CACC,yBAAyB;CACzB,qBAAqB;AACtB;;AAEA;CACC,WAAW;CACX,YAAY;AACb;;AAEA;CACC,WAAW;CACX,YAAY;AACb;;AAEA,mCAAmC;AACnC;CACC,kBAAkB;CAClB,SAAS;CACT,aAAa;CACb,mBAAmB;CACnB,YAAY;AACb;;AAEA;CACC,wBAAwB;CACxB,kBAAkB;AACnB;;AAEA;CACC,WAAW;AACZ;;AAEA;CACC,YAAY;AACb",sourcesContent:["#crms-container {\n\tposition: absolute;\n\tleft: 0;\n\tbottom: 0;\n\twidth: 640px;\n\theight: 570px;\n\tz-index: 10;\n\tbackground: #fff;\n\tborder-radius: 5px;\n\toverflow: hidden;\n\tbox-shadow: 1px 1px 7px 0 #343434;\n\twill-change: transform;\n}\n\n#crms-canvas-wrap {\n\tdisplay: flex;\n\tjustify-content: center;\n\tbackground: #d3d3d3;\n}\n\n#crms-preview {\n\twidth: 100%;\n\theight: 100%;\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: space-between;\n\tbackground: #d3d3d3;\n}\n\n#crms-preview-header {\n\theight: 30px;\n\tcursor: grab;\n\tdisplay: flex;\n\tjustify-content: flex-end;\n\talign-items: center;\n\tbackground: #fff;\n}\n\n#crms-preview-footer {\n\theight: 50px;\n\tpadding: 5px 10px;\n\tdisplay: flex;\n\tjustify-content: flex-end;\n\talign-items: center;\n\tbackground: #fff;\n}\n\n#crms-input {\n\tdisplay: none;\n\tvisibility: hidden;\n}\n\n#crms-output {\n\tdisplay: block;\n\tbackground-color: #6a6a6a;\n}\n\n/* #sharingScreen.visible {\n  display: block;\n} */\n\n/* screen share area selector */\n#backdrop-wrapper {\n\tposition: fixed;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n\tz-index: 1;\n}\n\n#drag-markers-container {\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n}\n\n.draggable {\n\tposition: absolute;\n\twidth: 16px;\n\theight: 16px;\n\tcursor: move;\n\tz-index: 2;\n}\n\n.btn {\n\tdisplay: inline-block;\n\tfont-weight: 400;\n\ttext-align: center;\n\twhite-space: nowrap;\n\tvertical-align: middle;\n\t-webkit-user-select: none;\n\t-moz-user-select: none;\n\t-ms-user-select: none;\n\tuser-select: none;\n\tborder: 1px solid #f8f9fa;\n\tmargin: 0 .75rem;\n\tpadding: .375rem .75rem;\n\tfont-size: 1rem;\n\tline-height: 1.5;\n\tborder-radius: .25rem;\n\ttransition: color .15s ease-in-out, background-color .15s ease-in-out, border-color .15s ease-in-out, box-shadow .15s ease-in-out;\n\tcolor: #212529;\n\tbackground-color: #f8f9fa;\n\tcursor: pointer;\n}\n\n.btn:hover {\n\tbackground-color: #e2e6ea;\n\tborder-color: #dae0e5;\n}\n\n.btn-primary {\n\tcolor: #fff;\n\tbackground-color: #007bff;\n\tborder-color: #007bff;\n}\n\n.btn-primary:hover {\n\tbackground-color: #0069d9;\n\tborder-color: #0062cc;\n}\n\n.icon-btn {\n\tbackground: none;\n\tborder: none;\n\toutline: none;\n\tpadding: 2px 7px;\n\tcursor: pointer;\n}\n\n.icon-btn.s20 {\n\tpadding: 4px 9px;\n}\n\n.icon-btn:hover {\n\tbackground-color: #e2e6ea;\n\tborder-color: #dae0e5;\n}\n\n.icon-btn.s24 > svg {\n\twidth: 24px;\n\theight: 24px;\n}\n\n.icon-btn.s20 > svg {\n\twidth: 20px;\n\theight: 20px;\n}\n\n/* end screen share area selector */\n#buttons {\n\tposition: absolute;\n\tbottom: 0;\n\tpadding: 1rem;\n\tbackground: #6a6a6a;\n\tz-index: 999;\n}\n\n.crms-hidden {\n\tdisplay: none !important;\n\tvisibility: hidden;\n}\n\n.w100 {\n\twidth: 100%;\n}\n\n.h100 {\n\theight: 100%;\n}\n"],sourceRoot:""}]);const a=s},645:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",i=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),i&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),i&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,i,r,o){"string"==typeof t&&(t=[[null,t,void 0]]);var s={};if(i)for(var a=0;a<this.length;a++){var c=this[a][0];null!=c&&(s[c]=!0)}for(var d=0;d<t.length;d++){var h=[].concat(t[d]);i&&s[h[0]]||(void 0!==o&&(void 0===h[5]||(h[1]="@layer".concat(h[5].length>0?" ".concat(h[5]):""," {").concat(h[1],"}")),h[5]=o),n&&(h[2]?(h[1]="@media ".concat(h[2]," {").concat(h[1],"}"),h[2]=n):h[2]=n),r&&(h[4]?(h[1]="@supports (".concat(h[4],") {").concat(h[1],"}"),h[4]=r):h[4]="".concat(r)),e.push(h))}},e}},537:t=>{"use strict";t.exports=function(t){var e=t[1],n=t[3];if(!n)return e;if("function"==typeof btoa){var i=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),r="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(i),o="/*# ".concat(r," */"),s=n.sources.map((function(t){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(t," */")}));return[e].concat(s).concat([o]).join("\n")}return[e].join("\n")}},379:t=>{"use strict";var e=[];function n(t){for(var n=-1,i=0;i<e.length;i++)if(e[i].identifier===t){n=i;break}return n}function i(t,i){for(var o={},s=[],a=0;a<t.length;a++){var c=t[a],d=i.base?c[0]+i.base:c[0],h=o[d]||0,l="".concat(d," ").concat(h);o[d]=h+1;var A=n(l),p={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==A)e[A].references++,e[A].updater(p);else{var C=r(p,i);i.byIndex=a,e.splice(a,0,{identifier:l,updater:C,references:1})}s.push(l)}return s}function r(t,e){var n=e.domAPI(e);n.update(t);return function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,r){var o=i(t=t||[],r=r||{});return function(t){t=t||[];for(var s=0;s<o.length;s++){var a=n(o[s]);e[a].references--}for(var c=i(t,r),d=0;d<o.length;d++){var h=n(o[d]);0===e[h].references&&(e[h].updater(),e.splice(h,1))}o=c}}},569:t=>{"use strict";var e={};t.exports=function(t,n){var i=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}},216:t=>{"use strict";t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},565:(t,e,n)=>{"use strict";t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},795:t=>{"use strict";t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var i="";n.supports&&(i+="@supports (".concat(n.supports,") {")),n.media&&(i+="@media ".concat(n.media," {"));var r=void 0!==n.layer;r&&(i+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),i+=n.css,r&&(i+="}"),n.media&&(i+="}"),n.supports&&(i+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleTagTransform(i,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},589:t=>{"use strict";t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},271:t=>{t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M7.724 65.49C13.36 55.11 21.79 46.47 32 40.56C39.63 36.15 48.25 33.26 57.46 32.33C59.61 32.11 61.79 32 64 32H448C483.3 32 512 60.65 512 96V416C512 451.3 483.3 480 448 480H64C28.65 480 0 451.3 0 416V96C0 93.79 .112 91.61 .3306 89.46C1.204 80.85 3.784 72.75 7.724 65.49V65.49zM48 416C48 424.8 55.16 432 64 432H448C456.8 432 464 424.8 464 416V224H48V416z"></path></svg>'},437:t=>{t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M0 456C0 442.7 10.75 432 24 432H488C501.3 432 512 442.7 512 456C512 469.3 501.3 480 488 480H24C10.75 480 0 469.3 0 456z"></path></svg>'},56:t=>{t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"></path></svg>'}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var o=e[i]={id:i,exports:{}};return t[i](o,o.exports,n),o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var i={};(()=>{"use strict";n.d(i,{default:()=>X});function t(){return window.outerHeight-window.innerHeight}function e(t){return`crms-${t}`}function r(t,e){t&&"function"==typeof t&&t.call(this,e)}const o={landscape:1,portrait:2};function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class a{constructor(){s(this,"resizing",!1),s(this,"drawing",!1),s(this,"dragPoint",void 0),s(this,"backdropCanvas",void 0),s(this,"backdropCtx",void 0),s(this,"START_X",void 0),s(this,"START_Y",void 0),s(this,"END_X",void 0),s(this,"END_Y",void 0),s(this,"CROP_W",void 0),s(this,"CROP_H",void 0),s(this,"BACKDROP_COLOR",void 0)}init(t){t?(this.START_X=t.x||0,this.START_Y=t.y||0,this.CROP_W=t.dx||0,this.CROP_H=t.dy||0,this.END_X=this.START_X+this.CROP_W,this.END_Y=this.START_Y+this.CROP_H):(this.START_X=0,this.START_Y=0),this._drawBackDrop(!0),this.areaSelectionStart=t=>{t.preventDefault(),t.stopPropagation(),t.target.classList.contains(e("control"))||this.resizing||(document.querySelectorAll(".draggable").forEach((t=>t.remove())),this.drawing=!0,this.START_X=t.clientX,this.START_Y=t.clientY)},this.areaSelectionEnd=t=>{if(t.preventDefault(),t.stopPropagation(),!t.target.classList.contains(e("control"))&&(this.resizing&&(this.resizing=!1,this._swapCoordinates(),this._drawResizeMarkers(this.backdropCtx)),this.drawing)){if(this.drawing=!1,t.clientX===this.START_X&&t.clientY===this.START_Y)return;this._swapCoordinates(),this._drawResizeMarkers(this.backdropCtx)}},this.areaSelectionMouseMove=t=>{if(t.preventDefault(),t.stopPropagation(),this.resizing)return this._areaResize(t),void this._drawArea();this.drawing&&(this.CROP_W=t.clientX-this.START_X,this.CROP_H=t.clientY-this.START_Y,this.END_X=t.clientX,this.END_Y=t.clientY,this._drawArea())},document.addEventListener("mousedown",this.areaSelectionStart),document.addEventListener("mouseup",this.areaSelectionEnd),document.addEventListener("mousemove",this.areaSelectionMouseMove)}getCoords(){return{x:this.START_X,y:this.START_Y,dx:this.CROP_W,dy:this.CROP_H}}destroy(){try{this._remove()}catch(t){}}_remove(){this.areaSelectionStart&&(document.removeEventListener("mousedown",this.areaSelectionStart,!1),this.areaSelectionStart=null),this.areaSelectionEnd&&(document.removeEventListener("mouseup",this.areaSelectionEnd,!1),this.areaSelectionEnd=null),this.areaSelectionMouseMove&&(document.removeEventListener("mousemove",this.areaSelectionMouseMove,!1),this.areaSelectionMouseMove=null),document.getElementById("backdrop-wrapper").remove()}_drawBackDrop(t){if(!t){const t=document.getElementById("backdrop-wrapper");return t&&document.body.removeChild(t),void(this.backdropCtx=null)}const e=document.createElement("div");e.setAttribute("id","backdrop-wrapper"),document.body.appendChild(e),this.backdropCanvas=document.createElement("canvas"),this.backdropCanvas.width=e.clientWidth,this.backdropCanvas.height=e.clientHeight,this.dragMarkersContainer=document.createElement("div"),this.dragMarkersContainer.setAttribute("id","drag-markers-container"),e.appendChild(this.backdropCanvas),e.appendChild(this.dragMarkersContainer),this.backdropCtx=this.backdropCanvas.getContext("2d"),this.backdropCtx.fillStyle=this.BACKDROP_COLOR,this.backdropCtx.fillRect(0,0,this.backdropCanvas.width,this.backdropCanvas.height),this._drawArea(),this._drawResizeMarkers(this.backdropCtx)}_drawArea(){this.backdropCtx.clearRect(0,0,this.backdropCanvas.width,this.backdropCanvas.height),this.backdropCtx.fillStyle=this.BACKDROP_COLOR,this.backdropCtx.fillRect(0,0,this.backdropCanvas.width,this.backdropCanvas.height),this.backdropCtx.globalCompositeOperation="destination-out",this.backdropCtx.fillStyle="red",this.backdropCtx.fillRect(this.START_X,this.START_Y,this.CROP_W,this.CROP_H),this.backdropCtx.globalCompositeOperation="source-over",this.backdropCtx.strokeStyle="rgb(163, 9, 9)",this.backdropCtx.setLineDash([6]),this.backdropCtx.lineWidth="3",this.backdropCtx.strokeRect(this.START_X,this.START_Y,this.CROP_W,this.CROP_H)}_swapCoordinates(){if(this.END_X<this.START_X){const t=this.START_X;this.START_X=this.END_X,this.END_X=t,this.CROP_W=this.END_X-this.START_X}if(this.END_Y<this.START_Y){const t=this.START_Y;this.START_Y=this.END_Y,this.END_Y=t,this.CROP_H=this.END_Y-this.START_Y}}_drawResizeMarkers(t){t.fillStyle="rgb(180, 9, 9)";const e={topLeft:{type:0,values:[this.START_X-4,this.START_Y-4]},topCenter:{type:1,values:[this.START_X+(this.CROP_W/2-4),this.START_Y-4]},topRight:{type:0,values:[this.END_X-4,this.START_Y-4]},rightCenter:{type:1,values:[this.END_X-4,this.START_Y+(this.CROP_H/2-4)]},bottomRight:{type:0,values:[this.END_X-4,this.END_Y-4]},bottomCenter:{type:1,values:[this.START_X+(this.CROP_W/2-4),this.END_Y-4]},bottomLeft:{type:0,values:[this.START_X-4,this.END_Y-4]},leftCenter:{type:1,values:[this.START_X-4,this.START_Y+(this.CROP_H/2-4)]}};for(let[n,i]of Object.entries(e)){t.fillRect(i.values[0],i.values[1],8,8);const e=document.createElement("div");e.classList.add("draggable"),e.setAttribute("side",n),i.type>0?e.classList.add("side"):e.classList.add("corner"),e.style.top=i.values[1]-4+"px",e.style.left=i.values[0]-4+"px",this.dragMarkersContainer.appendChild(e)}document.querySelectorAll(".draggable").forEach((t=>{t.addEventListener("mousedown",this._areaResizeStart.bind(this))}))}_areaResizeStart(t){t.preventDefault(),t.stopPropagation(),this.resizing=!0,this.dragPoint=t.target,document.querySelectorAll(".draggable").forEach((t=>{t.removeEventListener("mousedown",this._areaResizeStart),t.remove()}))}_areaResize(t){switch(this.dragPoint.getAttribute("side")){case"topLeft":{const e=t.clientX-this.START_X,n=t.clientY-this.START_Y;this.CROP_W=this.CROP_W-e,this.CROP_H=this.CROP_H-n,this.START_X=t.clientX,this.START_Y=t.clientY;break}case"topCenter":{const e=t.clientY-this.START_Y;this.CROP_H=this.CROP_H-e,this.START_Y=t.clientY;break}case"topRight":{const e=t.clientX-this.END_X,n=t.clientY-this.START_Y;this.CROP_W=this.CROP_W+e,this.CROP_H=this.CROP_H-n,this.END_X=t.clientX,this.START_Y=t.clientY;break}case"rightCenter":{const e=t.clientX-this.END_X;this.CROP_W=this.CROP_W+e,this.END_X=t.clientX;break}case"bottomRight":{const e=t.clientX-this.END_X,n=t.clientY-this.END_Y;this.CROP_W=this.CROP_W+e,this.CROP_H=this.CROP_H+n,this.END_X=t.clientX,this.END_Y=t.clientY;break}case"bottomCenter":{const e=t.clientY-this.END_Y;this.CROP_H=this.CROP_H+e,this.END_Y=t.clientY;break}case"bottomLeft":{const e=t.clientX-this.START_X,n=t.clientY-this.END_Y;this.CROP_W=this.CROP_W-e,this.CROP_H=this.CROP_H+n,this.START_X=t.clientX,this.END_Y=t.clientY;break}case"leftCenter":{const e=t.clientX-this.START_X;this.CROP_W=this.CROP_W-e,this.START_X=t.clientX;break}}}}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class d{constructor(t){if(c(this,"_isMoving",void 0),c(this,"_startCoords",void 0),c(this,"_translateOffset",void 0),c(this,"_deltaX",void 0),c(this,"_deltaY",void 0),c(this,"_dragZone",void 0),c(this,"_container",void 0),this._container=t,this._dragZone=t.querySelector(".window-move"),!this._container||!this._dragZone)throw console.error("WindowManager: Container is not available"),new Error("WindowManager: Container is not available")}init(){this._isMoving=!1,this._startCoords={x:0,y:0},this._translateOffset={x:0,y:0},this._deltaX=this._deltaY=0,this._limitCanvasWrap(),this._dragZone.addEventListener("mousedown",this._mouseDown.bind(this)),document.addEventListener("mousemove",this._moveMove.bind(this)),document.addEventListener("mouseup",this._mouseUp.bind(this))}fitCanvas(t){let e;const n=e=>{e?t.classList.add("w100","h100"):(t.classList.add("h100"),t.classList.remove("w100"))};try{e=this._getHeaderFooterOffset()}catch(t){e=0}const i=this._container.clientWidth,r=this._container.clientHeight-e,s=i/r>1?o.landscape:o.portrait;s===o.portrait&&n(t.width>i),s===o.landscape&&n(t.width>i&&t.height<r)}minimize(t){if(t){const t=this._container.querySelector(`#${e("preview-header")}`),n=t&&t.clientHeight;this._container.style.height=n?n+"px":this._container.clientHeight+"px"}else this._container.style.removeProperty("height")}destroy(){try{this._dragZone.removeEventListener("mousedown",this._mouseDown),document.removeEventListener("mousemove",this._moveMove),document.removeEventListener("mouseup",this._mouseUp),this._dragZone.remove(),this._container=null,this._dragZone=null}catch(t){}}_mouseDown(t){t.stopPropagation(),this._isMoving=!0,this._dragZone.style.cursor="grabbing",this._startCoords.x=t.clientX,this._startCoords.y=t.clientY}_moveMove(t){t.stopPropagation(),this._isMoving&&(this._deltaX=t.clientX-this._startCoords.x,this._deltaY=t.clientY-this._startCoords.y,this._container.style.transform=`translate(${this._deltaX+this._translateOffset.x}px, ${this._deltaY+this._translateOffset.y}px)`)}_mouseUp(t){t.stopPropagation(),this._isMoving&&(this._isMoving=!1,this._dragZone.style.cursor="grab",this._translateOffset.x+=this._deltaX,this._translateOffset.y+=this._deltaY)}_limitCanvasWrap(){const t=this._container.querySelector(`#${e("canvas-wrap")}`);let n,i;try{i=this._getHeaderFooterOffset()}catch(t){n=t,i=0}if(t||(n="WindowManager: Canvas wrap element not found"),n)throw console.error(n),new Error(n);t.style.maxWidth=this._container.clientWidth+"px",t.style.maxHeight=this._container.clientHeight-i+"px"}_getHeaderFooterOffset(){try{const t=this._container.querySelector(`#${e("preview-header")}`).clientHeight;return t+this._container.querySelector(`#${e("preview-footer")}`).clientHeight}catch(t){throw new Error("WindowManager: Can't obtaint header & footer height")}}}var h=n(56),l=n.n(h),A=n(437),p=n.n(A),C=n(271),u=n.n(C);function g(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class f{constructor(){g(this,"constraints",void 0),g(this,"areaSelector",void 0),g(this,"windowManager",void 0),g(this,"containerEl",void 0),g(this,"videoEl",void 0),g(this,"canvas",void 0),g(this,"displaySurfaceType",void 0),g(this,"buttonGroup",{1:[],2:[]}),this.areaSelector=new a}render(t){let{customClass:n,backdropColor:i}=t;const r="container";if(document.getElementById(e(r)))return;this.containerEl=this._createElement("div",e(r)),n&&this.containerEl.classList.add(n),this.videoEl=this._createElement("video",e("input")),this.canvas=this._createElement("canvas",e("output"));const o=this._initPreviewer(this.canvas);this.videoEl.muted=!0,this.containerEl.appendChild(this.videoEl),this.containerEl.appendChild(o),this._togglePreviewer(!1),document.body.appendChild(this.containerEl),this.windowManager=new d(this.containerEl),this.areaSelector.BACKDROP_COLOR=i}startStream(t,e){const{dx:n,dy:i}=e,r=this.canvas.getContext("2d"),o=t.getVideoTracks()[0].getSettings();this.displaySurfaceType=o&&o.displaySurface,this.constraints=this._correctCoordinates(e,!0),this.videoEl.ontimeupdate=()=>{this._cropFrame(r,this.videoEl)},this.videoEl.onpause=()=>r.clearRect(0,0,n,i),this.videoEl.onended=()=>r.clearRect(0,0,n,i),this.videoEl.srcObject=t,this.videoEl.play(),this.canvas.width=n,this.canvas.height=i,this._togglePreviewer(!0),this.windowManager.init(),this.windowManager.fitCanvas(this.canvas)}stopStream(){try{(this.videoEl.srcObject.getTracks()||[]).forEach((t=>t.stop())),this.videoEl.srcObject=null,this._togglePreviewer(!1)}catch(t){}}destroy(){try{this.areaSelector.destroy(),this.windowManager.destroy(),this.containerEl.remove()}catch(t){}}onStreamStarted(t){}onStreamStopped(){}_cropFrame(t,e){if(!t)return;const{x:n,y:i,dx:r,dy:o}=this.constraints;t.drawImage(e,n,i,r,o,0,0,r,o)}_createElement(t,e){const n=document.createElement(t);return n.setAttribute("id",e),n}_initPreviewer(t){const n=this._createElement("div",e("preview")),i=this._createElement("div",e("canvas-wrap")),r=this._createElement("div",e("preview-header")),o=this._createElement("div",e("preview-footer"));return r.classList.add("window-move"),this._headerButtonsConfig.forEach((t=>{let e=this._renderHeaderButton(t);r.append(e)})),this._footerButtonsConfig.forEach((t=>{let e=this._renderFooterButton(t);o.append(e)})),i.append(t),n.append(r,i,o),n}_renderHeaderButton(t){let{id:e,icon:n,callback:i,iconSize:o}=t;const s=document.createElement("button");return s.setAttribute("id",e),s.setAttribute("type","button"),s.classList.add("crms-control","icon-btn"),o&&s.classList.add(o),s.innerHTML=n,s.onmousedown=t=>{t.stopPropagation()},s.onclick=t=>{r(i,t.currentTarget)},s}_renderFooterButton(t){let{id:n,text:i,primary:o,visible:s,group:a,callback:c}=t;const d=document.createElement("button");return d.setAttribute("id",n),d.setAttribute("type","button"),d.classList.add("btn","crms-control"),a&&a.push(d),o&&d.classList.add("btn-primary"),d.innerText=i,d.onclick=()=>{r(c)},!1===s&&d.classList.add(e("hidden")),d}_togglePreviewer(t){t?this.containerEl.classList.remove(e("hidden")):this.containerEl.classList.add(e("hidden"))}_toggleButtons(t){if(1===t)return this.buttonGroup[1].forEach((t=>t.classList.remove(e("hidden")))),void this.buttonGroup[2].forEach((t=>t.classList.add(e("hidden"))));2===t&&(this.buttonGroup[2].forEach((t=>t.classList.remove(e("hidden")))),this.buttonGroup[1].forEach((t=>t.classList.add(e("hidden")))))}_correctCoordinates(e,n){const i=function(){let t;const e=navigator.userAgent;return t=e.indexOf("Firefox")>-1?"Firefox":e.indexOf("SamsungBrowser")>-1?"Samsung Internet":e.indexOf("Opera")>-1||e.indexOf("OPR")>-1?"Opera":e.indexOf("Trident")>-1?"IE":e.indexOf("Edge")>-1?"EdgeLegacy)":e.indexOf("Edg")>-1?"Edge":e.indexOf("Chrome")>-1?"Chrome":e.indexOf("Safari")>-1?"Safari":"unknown",t}();if(!this.displaySurfaceType||"monitor"===this.displaySurfaceType){let{top:i,left:r}={top:window.screenY+t(),left:window.screenX<0?0:window.screenX};return{...e,x:n?e.x+r:e.x-r,y:n?e.y+i:e.y-i}}if("window"===this.displaySurfaceType||"browser"===this.displaySurfaceType){console.warn("CropMyScreen does support cropping of the entire screen.\nIt does not crop browser window or tab well enough.\nPlease, use 'Entire screen' option instead.");let r=0;return"Chrome"===i&&(r=7*window.devicePixelRatio),{...e,y:n?e.y+t()+r:e.y-t()-r}}return e}get _headerButtonsConfig(){return[{id:e("btn-minimize"),icon:p(),iconSize:"s20",callback:(()=>{let t=!1;return e=>{t?(e.innerHTML=p(),this.windowManager.minimize(!1)):(e.innerHTML=u(),this.windowManager.minimize(!0)),t=!t}})()},{id:e("btn-close"),icon:l(),iconSize:"s24",callback:()=>{this.areaSelector.destroy(),this._toggleButtons(1),this.stopStream(),this.onStreamStopped()}}]}get _footerButtonsConfig(){const t={id:e("btn-select-area"),text:"Select Area",primary:!1,visible:!0,group:this.buttonGroup[1],callback:()=>{const t=this._correctCoordinates(this.constraints,!1);this.areaSelector.init(t),this._toggleButtons(2)}};return[{id:e("btn-cancel-selection"),text:"Cancel",primary:!1,visible:!1,group:this.buttonGroup[2],callback:()=>{this.areaSelector.destroy(),this._toggleButtons(1)}},{id:e("btn-apply-selection"),text:"Apply",primary:!0,visible:!1,group:this.buttonGroup[2],callback:()=>{this.constraints=this._correctCoordinates(this.areaSelector.getCoords(),!0),this.areaSelector.destroy(),this.canvas.width=this.constraints.dx,this.canvas.height=this.constraints.dy,this.windowManager.fitCanvas(this.canvas),this._toggleButtons(1)}},t,{id:e("btn-start-sharing"),text:"Start presentation",primary:!0,group:this.buttonGroup[1],callback:()=>{const t=this.canvas.captureStream();this.onStreamStarted(t),this._togglePreviewer(!1)}}]}}var v=n(379),b=n.n(v),m=n(795),_=n.n(m),w=n(569),y=n.n(w),B=n(565),x=n.n(B),S=n(216),E=n.n(S),R=n(589),k=n.n(R),T=n(740),O={};O.styleTagTransform=k(),O.setAttributes=x(),O.insert=y().bind(null,"head"),O.domAPI=_(),O.insertStyleElement=E();b()(T.Z,O);T.Z&&T.Z.locals&&T.Z.locals;function Y(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class P{constructor(t){Y(this,"settings",void 0),Y(this,"cropper",void 0);try{this.settings={...this._defaultOptions(),...t||{}},this._validateOptions(this.settings)}catch(t){throw new Error("CropMyScreen: Plugin initialization error. Some of the provided options are invalid")}this.cropper=new f(P.prefix),this.cropper.render({customClass:this.settings.previewerClass,backdropColor:this.settings.backdropColor})}start(t){if(!this.cropper)throw Error("CropMyScreen: Instance error. It seems like the plugin does not initialize properly or has already been destroyed.");return this.cropper.startStream(t,{x:this.settings.cropX,y:this.settings.cropY,dx:this.settings.cropW,dy:this.settings.cropH}),new Promise(((t,e)=>{this.cropper.onStreamStarted=e=>{t(e)},this.cropper.onStreamStopped=()=>{e()}}))}stop(){this.cropper.stopStream()}destroy(){this.cropper&&(this.stop(),this.cropper.destroy(),this.cropper=null)}_defaultOptions(){return{backdropColor:"#00000073",cropX:0,cropY:0,cropW:640,cropH:480,previewerClass:""}}_validateOptions(t){let{backdropColor:e,cropX:n,cropY:i,cropW:r,cropH:o}=t;const s=new RegExp("^#[a-fA-F0-9]{3}$","gm"),a=new RegExp("^#[a-fA-F0-9]{6}([0-9]{2})?$","gm");if(e&&!s.test(e)&&!a.test(e))throw console.error('CropMyScreen: Backdrop color format error. Color must be set in HEX format - e.g. "#fff", "#fffaaa", "#fffaaa12"'),new Error;if(n&&isNaN(+n))throw console.error("CropMyScreen: cropX value is not a number"),new Error;if(i&&isNaN(+i))throw console.error("CropMyScreen: cropY value is not a number"),new Error;if(r&&isNaN(+r))throw console.error("CropMyScreen: cropW value is not a number"),new Error;if(o&&isNaN(+o))throw console.error("CropMyScreen: cropH value is not a number"),new Error}}const X=P})(),CropMyScreen=i.default})();
//# sourceMappingURL=crop-my-screen.min.js.map